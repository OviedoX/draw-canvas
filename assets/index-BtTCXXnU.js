(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();let e={line_width:10,stroke_color:"#000",canvasHst:[],redo:[],saveCanvas:null,mouseMoveHandler:null,initX:null,initY:null,ctx:null,canvas:null};function u(t,n){return n.getImageData(0,0,t.width,t.height)}function l(t,n,o){const{initX:i,initY:r,line_width:s,stroke_color:a}=e;o.beginPath(),o.moveTo(i,r),o.lineWidth=s,o.strokeStyle=a,o.lineCap="round",o.lineJoin="round",o.lineTo(t,n),o.stroke(),e.initX=t,e.initY=n}const h=t=>n=>{n.preventDefault();let o=n.target.getBoundingClientRect(),{pageX:i,pageY:r}=n.changedTouches?n.changedTouches[0]:n;l(i-o.left,r-o.top,t)},d=(t,n)=>o=>{o.preventDefault();let i,r=o.target.getBoundingClientRect();e.redo.length>0&&(e.redo=[]),e.saveCanvas=u(n,t),e.canvasHst.push(e.saveCanvas),o.changedTouches?(i="touchmove",e.initX=o.changedTouches[0].pageX-r.left,e.initY=o.changedTouches[0].pageY-r.top):(i="mousemove",e.initX=o.pageX-r.left,e.initY=o.pageY-r.top),l(e.initX,e.initY,t),e.mouseMoveHandler=h(t),n.addEventListener(i,e.mouseMoveHandler)};function f(t,n){t.addEventListener("mousedown",d(n,t)),t.addEventListener("touchstart",d(n,t))}function g(t,n,o){if(!n){if(e.redo.length===0)return;let s=e.redo.pop();e.canvasHst.push(u(o,t)),t.putImageData(s,0,0);return}if(e.canvasHst.length===0)return;let i=u(o,t);e.redo.push(i);let r=e.canvasHst.pop();t.putImageData(r,0,0)}function m(t){const n=t.target;if(n.closest(".btn-return")){const o=n.closest(".btn-left");g(e.ctx,!o,e.canvas);return}n.closest(".btn-reset")&&(e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.canvasHst=[],e.redo=[])}function c(t,n){let o=u(t,n);t.width=window.innerWidth*.9,t.height=window.innerHeight*.7,n.putImageData(o,0,0)}const v={color:t=>{e.stroke_color=t.value},lineWidth:t=>{e.line_width=parseInt(t.value)}};function E(t){const n=t.target,o=n.dataset.handlerType,i=v[o];i&&i(n)}const w=(t,n,o)=>{t.removeEventListener(o,e.mouseMoveHandler)};function p(t){let n=t.changedTouches?"touchmove":"mousemove";w(e.canvas,e.ctx,n)}document.getElementById("app");e.canvas=document.querySelector("canvas");e.ctx=e.canvas.getContext("2d",{willReadFrequently:!0});f(e.canvas,e.ctx);c(e.canvas,e.ctx);window.addEventListener("resize",()=>c(e.canvas,e.ctx));document.addEventListener("click",m);document.addEventListener("input",E);document.addEventListener("mouseup",p);document.addEventListener("touchend",p);
